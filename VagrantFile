Vagrant.configure("2") do |config|
     config.vm.box = "ubuntu/xenial64"
     if ENV['VAGRANT_LOCAL_MOUNT']
          config.vm.synced_folder ENV['VAGRANT_LOCAL_MOUNT'], "/home/vagrant/code"
     end

     # Forward ports to the VM
     config.vm.network "forwarded_port", guest: 8080, host:8080

    # Basics install
    # via apt get
    # -- latest patches, Python 2.7, curl, zip, unzip
    config.vm.provision "shell", path: "basics.sh"

    # Docker Install
    config.vm.provision "shell", path: "dockerInstall.sh"

    # Hashistack Install
    config.vm.provision "shell", path: "hashistackInstall.sh"

    # install AWS CLI
    config.vm.provision "shell", path: "awsCLI.sh"

    # copy in ssh keys from host if the SSH_KEY_LOCATION environment variable is set. 
    if ENV['VAGRANT_SSH_KEY_LOCATION']
    config.vm.provision "shell", inline: "sudo rm -f /home/vagrant/.ssh/*.priv"
    config.vm.provision "file", source: ENV['VAGRANT_SSH_KEY_LOCATION'], destination: "/home/vagrant/.ssh"
    config.vm.provision "shell", inline: "sudo chmod 400 /home/vagrant/.ssh/*.priv"
    config.vm.provision "shell", inline: "sudo chmod 400 /home/vagrant/.ssh/*.pem"
    end
   end